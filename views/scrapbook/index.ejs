<!DOCTYPE html>
<% layout('layout') -%>

<h1><%= title %></h1>
<p class="lead">A scrapbook to remember.</p>

<hr/>

<div id="flipbook">
    <div class="hard"><br><h1><%= album.name %></h1></div> 
    <div class="hard"></div>
    <% for(var i=0; i<album.photos.length; i=i+2) { %>
        <!-- two photos per page, can change if neccessary -->
        <div>
        <% for(var photoIndex=i; photoIndex<i+2 && photoIndex<album.photos.length; photoIndex++) { %>
            <% if(album.photos[photoIndex].albumName) { %>
                <% innerScrapbook = album.photos[photoIndex]; %>
                <% include scrapbook_partials/scrapbook %>
            <% } else { %>
                <% innerPhoto = album.photos[photoIndex]; %>
                <% include scrapbook_partials/photo %>
            <% } %>
            <br>
        <% } %>
        </div>
    <% } %>

    <% if(Math.ceil(album.photos.length/2) % 2) { //if odd, add extra blank page %>
        <div></div>
    <% } %>
    <div class="hard"></div>
    <div class="hard"></div>
</div>


<% /* TESTING CODE do not include %>
<% for(var i=0; i<photos.length; i++) { %>
    <img src="<%= photos[i].source %>"/>
<% } %>
<% for(var i=0; i<photos.length; i++) { %>
    <% for(var j=0; j<photos[i].data.length; j++) { %>
        <img src="<%= photos[i].data[j].source %>" width="200" height="200"/>

        <p><%= photos[i].data[j].name %></p>
        <p><%= photos[i].data[j].created_time %></p>
        <p><%= photos[i].data[j].place %></p>
    <% } %>
    <hr/>
<% } %>
<% */ %>

